#!/bin/bash

trap "echo Signal trap. Abort!; exit 1;" SIGINT SIGTERM

RSYNC_SSH="ssh -p 22"
RSYNC_OPTS="--delete --progress --verbose -az"

USER=pi
ADDRESS=

# Full path on destination machine.
DEST_DIR=/bak/will

DEST=$USER@$ADDRESS:$DEST_DIR

LOG=pi-backup.log

DIRECTORIES=($HOME/Music $HOME/Pictures $HOME/Documents $HOME/secret)

for directory in ${DIRECTORIES[@]}
do
	# If one fails, abort.  Don't try the others.
	rsync $RSYNC_OPTS -e "$RSYNC_SSH" $directory $DEST/ || break
done

date >> $LOG
